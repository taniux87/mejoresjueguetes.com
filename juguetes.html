<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cat√°logo de Juguetes ‚Äì MejoresJuguetes.com</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/estilos.css">
  
  <style>
    /* ‚úÖ ESTILOS PARA LAS PESTA√ëAS (Respetando tu dise√±o original) */
    .tabs, .subtabs {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .tab-btn, .subtab-btn {
      padding: 12px 20px;
      background: #0A3D62;
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
      border: 1px solid #082f4a;
      transition: 0.3s ease;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .tab-btn.active, .subtab-btn.active {
      background: #C9A86A;
      color: #111;
      border-color: #b8955c;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    /* ‚úÖ GRID DE JUGUETES (Estilo Premium) */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }

    .card {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      border: 1px solid #eee;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      transition: 0.3s transform ease, 0.3s box-shadow ease;
      text-align: center;
      display: flex;
      flex-direction: column;
      text-decoration: none;
      color: #333;
    }

    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }

    .card img {
      width: 100%;
      height: 220px;
      object-fit: contain;
      border-radius: 10px;
      margin-bottom: 15px;
      background: #f9f9f9;
    }

    .card h3 {
      font-size: 1.1rem;
      margin-bottom: 10px;
      height: 3em;
      overflow: hidden;
    }

    .btn-amazon {
      margin-top: 15px;
      background: #0A3D62;
      color: #fff;
      padding: 10px;
      border-radius: 6px;
      font-weight: bold;
      text-decoration: none;
      transition: 0.2s;
    }

    .btn-amazon:hover {
      background: #C9A86A;
      color: #111;
    }

    /* ‚úÖ PAGINACI√ìN */
    .pagination {
      margin-top: 40px;
      display: flex;
      justify-content: center;
      gap: 15px;
      align-items: center;
      padding-bottom: 60px;
    }

    .pagination button {
      padding: 12px 25px;
      border-radius: 8px;
      border: none;
      background: #0A3D62;
      color: #fff;
      cursor: pointer;
      font-weight: 700;
    }

    .pagination button:disabled {
      background: #e0e0e0;
      color: #999;
      cursor: not-allowed;
    }
  </style>
</head>

<body>

<header class="header">
  <div class="container header-flex">
    <div class="logo-box">
      <img src="img/hero.png" alt="Logo MejoresJuguetes" class="logo-img">
      <span class="logo-text">MejoresJuguetes.com</span>
    </div>

    <nav class="menu">
      <a href="index.html">Inicio</a>
      <a href="blog.html">Blog</a>
      <a href="juguetes.html" class="active">Juguetes</a>
      <a href="rankings.html">Rankings</a>
      <a href="resenas.html">Rese√±as</a>
      <a href="contacto.html">Contacto</a>
    </nav>

    <div class="search-box">
      <form action="buscar.html" method="GET">
        <input type="text" name="q" placeholder="Buscar juguetes..." required>
        <button type="submit">üîç</button>
      </form>
    </div>
  </div>
</header>

<section class="hero" style="background-image: url('img/hero.png');">
  <div class="container hero-overlay">
    <h2>Cat√°logo Completo 2025</h2>
    <p>Explora nuestras 13 categor√≠as con las mejores ofertas seleccionadas.</p>
  </div>
</section>

<main class="container">

  <section class="section" style="margin-top: 30px;">
    <div class="tabs" role="tablist">
      <button class="tab-btn active" data-main="juguetes_bebe_y_preescolar">üë∂ Beb√©s</button>
      <button class="tab-btn" data-main="munecas_y_accesorios">üëó Mu√±ecas</button>
      <button class="tab-btn" data-main="figuras_de_accion">ü¶∏ Figuras</button>
      <button class="tab-btn" data-main="construccion_y_bloques">üèóÔ∏è Construcci√≥n</button>
      <button class="tab-btn" data-main="juegos_de_mesa_y_puzzles">üé≤ Mesa y Puzzles</button>
      <button class="tab-btn" data-main="juguetes_aire_libre">üõù Aire Libre</button>
      <button class="tab-btn" data-main="vehiculos_y_radiocontrol">üèéÔ∏è Veh√≠culos</button>
      <button class="tab-btn" data-main="arte_y_manualidades">üé® Arte</button>
      <button class="tab-btn" data-main="juguetes_educativos_y_stem">üß™ STEM</button>
      <button class="tab-btn" data-main="impresion_3d_y_tecnologia">‚öôÔ∏è Tecnolog√≠a</button>
      <button class="tab-btn" data-main="consolas_y_accesorios">üéÆ Consolas</button>
      <button class="tab-btn" data-main="videojuegos_coleccion_y_familia">üëæ Videojuegos</button>
      <button class="tab-btn" data-main="juguetes_general_y_tendencias">üöÄ Tendencias</button>
    </div>
  </section>

  <section class="section">
    <div id="subtabs" class="subtabs"></div>
  </section>

  <hr style="border: 0; height: 1px; background: #eee; margin: 20px 0;">

  <section class="section">
    <div id="resultados" class="grid">
      </div>

    <div id="paginacion" class="pagination">
      <button id="btnAnterior" disabled>‚Üê Anterior</button>
      <span id="infoPagina" style="font-weight: bold; color: #666;"></span>
      <button id="btnSiguiente" disabled>Siguiente ‚Üí</button>
    </div>
  </section>

</main>

<footer class="footer">
  <div class="container">
    <p>¬© 2025 MejoresJuguetes.com ‚Äì Todos los derechos reservados</p>
    <div class="footer-links">
      <a href="quienes-somos.html">Qui√©nes somos</a>
      <a href="privacidad.html">Pol√≠tica de privacidad</a>
      <a href="cookies.html">Pol√≠tica de cookies</a>
      <a href="aviso-legal.html">Aviso legal</a>
    </div>
  </div>
</footer>

<script>
  /**
   * L√ìGICA DE CARGA DIN√ÅMICA DE JUGUETES
   * Este script maneja la navegaci√≥n por las 13 secciones.
   */
  let juguetesData = {};
  const MAX_RESULTS = 24; 
  const FOTO_DEFECTO = "img/hero.png";
  
  let paginaActual = 0;
  let categoriaActual = "juguetes_bebe_y_preescolar";
  let subcategoriaActual = "";

  async function iniciarCat√°logo() {
    console.log("Iniciando carga de cat√°logo...");
    try {
      const respuesta = await fetch("juguetes.json");
      if (!respuesta.ok) throw new Error("Archivo juguetes.json no encontrado");
      
      juguetesData = await respuesta.json();
      console.log("Datos cargados correctamente:", Object.keys(juguetesData));
      
      // Iniciamos con la primera categor√≠a
      seleccionarCategoria(categoriaActual);
      
    } catch (error) {
      console.error("Error cr√≠tico:", error);
      document.getElementById("resultados").innerHTML = `
        <div style="grid-column: 1/-1; text-align: center; padding: 50px;">
          <h3>‚ö†Ô∏è Error de Conexi√≥n</h3>
          <p>No se pudo cargar el archivo <strong>juguetes.json</strong>. Aseg√∫rate de que est√© en la carpeta ra√≠z de tu GitHub.</p>
        </div>
      `;
    }
  }

  function seleccionarCategoria(id) {
    categoriaActual = id;
    const datosDeCategoria = juguetesData[categoriaActual];

    if (!datosDeCategoria) {
      console.warn("La categor√≠a " + id + " no existe en el JSON.");
      return;
    }

    // Generar subpesta√±as (las llaves internas como 'bebes_0_24_meses', etc.)
    const subIds = Object.keys(datosDeCategoria);
    renderizarSubtabs(subIds);
    
    // Seleccionar la primera subcategor√≠a por defecto
    subcategoriaActual = subIds[0];
    paginaActual = 0;
    renderizarProductos();
  }

  function renderizarSubtabs(listaIds) {
    const contenedor = document.getElementById("subtabs");
    contenedor.innerHTML = "";
    
    listaIds.forEach((id, index) => {
      const btn = document.createElement("button");
      btn.className = `subtab-btn ${index === 0 ? "active" : ""}`;
      // Usamos el campo 'titulo' de la subcategor√≠a en el JSON
      btn.textContent = juguetesData[categoriaActual][id].titulo || id.replace(/_/g, " ");
      
      btn.onclick = () => {
        document.querySelectorAll(".subtab-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        subcategoriaActual = id;
        paginaActual = 0;
        renderizarProductos();
      };
      contenedor.appendChild(btn);
    });
  }

  function renderizarProductos() {
    const contenedor = document.getElementById("resultados");
    contenedor.innerHTML = "";
    
    const dataFinal = juguetesData[categoriaActual][subcategoriaActual];
    if (!dataFinal || !dataFinal.items) {
      contenedor.innerHTML = "<h3>Pr√≥ximamente...</h3>";
      return;
    }

    const todosLosJuguetes = dataFinal.items;
    const inicio = paginaActual * MAX_RESULTS;
    const fin = inicio + MAX_RESULTS;
    const bloqueAMostrar = todosLosJuguetes.slice(inicio, fin);

    contenedor.innerHTML = bloqueAMostrar.map(item => `
      <div class="card">
        <img src="${item.imagenAmazon || FOTO_DEFECTO}" onerror="this.src='${FOTO_DEFECTO}'" alt="${item.titulo}">
        <h3>${item.titulo}</h3>
        <p style="color: #f39c12; font-weight: bold;">‚≠ê ${item.rating || '4.5'} / 5</p>
        <p style="font-size: 0.85rem; color: #777; margin: 5px 0;">Marca: ${item.marca || 'Gen√©rica'}</p>
        <a href="${item.amazon}" class="btn-amazon" target="_blank">üõí Ver en Amazon</a>
      </div>
    `).join("");

    // Gesti√≥n de Paginaci√≥n
    const totalPaginas = Math.ceil(todosLosJuguetes.length / MAX_RESULTS) || 1;
    document.getElementById("infoPagina").textContent = `P√°gina ${paginaActual + 1} de ${totalPaginas}`;
    document.getElementById("btnAnterior").disabled = paginaActual === 0;
    document.getElementById("btnSiguiente").disabled = (paginaActual + 1) >= totalPaginas;
    
    document.getElementById("paginacion").style.display = todosLosJuguetes.length > MAX_RESULTS ? "flex" : "none";
  }

  // --- EVENTOS DE CLIC EN CATEGOR√çAS PRINCIPALES ---
  document.querySelectorAll(".tab-btn").forEach(boton => {
    boton.addEventListener("click", () => {
      document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
      boton.classList.add("active");
      seleccionarCategoria(boton.dataset.main);
    });
  });

  document.getElementById("btnAnterior").onclick = () => { 
    if(paginaActual > 0) { paginaActual--; renderizarProductos(); window.scrollTo(0, 500); }
  };
  
  document.getElementById("btnSiguiente").onclick = () => { 
    paginaActual++; renderizarProductos(); window.scrollTo(0, 500);
  };

  // ARRANCAR
  iniciarCat√°logo();
</script>

</body>
</html>
